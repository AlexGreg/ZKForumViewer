












<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" >
	<meta http-equiv="X-UA-Compatible" content="chrome=1">	
	<link rel="shortcut icon" type="image/ico" href="/resource/img/favicon.ico" >
	<link rel="bookmark" href="/resource/img/favicon.ico" >
	<link href="http://feeds.feedburner.com/zkoss?format=xml" rel="alternate" type="application/rss+xml" title="ZK RSS FEED" />
	<link rel="stylesheet" type="text/css" href='/forum/css/website/template.css.dsp;jsessionid=756C5A443DB3275E951793825EA21D80'	/>
	<link type="text/css" rel="stylesheet" href='/forum/less/index;jsessionid=756C5A443DB3275E951793825EA21D80?1343202457517' />
<title>Automatic Session Timeout With Timer | Forum | ZK </title>
<meta name="keywords" content="ajax zk forum" />
<meta name="description" content="Automatic Session Timeout With Timer"/> 
<meta name="Robots" content="all"/>
<meta name="author" content="asegner"/>
<meta name="classification" content="forum"/>
<meta name="generator" content="zk jsp"/>


<link rel="stylesheet" type="text/css" href="/forum/zkau/web/dd3ed978/_zkiju-breeze/zul/css/zk.wcs;jsessionid=756C5A443DB3275E951793825EA21D80"/>

<script type="text/javascript" src="/forum/zkau/web/dd3ed978/js/zk.wpd;jsessionid=756C5A443DB3275E951793825EA21D80" charset="UTF-8">
</script>
<script type="text/javascript" src="/forum/zkau/web/dd3ed978/js/zul.lang.wpd;jsessionid=756C5A443DB3275E951793825EA21D80" charset="UTF-8">
</script>
<!-- ZK 5.0.9 EE 2011102015 Evaluation Only -->

<script type="text/javascript" src='/forum/js/zorum.js.dsp;jsessionid=756C5A443DB3275E951793825EA21D80' charset="UTF-8">
</script>
<style>
	.gridRows iframe{
		border:none;
	}
	.fiddleiframe{
		display:none;
	}
	.commentBody iframe{
	   border:none;	
	}	
</style>
</head>
<body class="zk-forum">
	<div id="zk-container">
		<div id="index-header">
		<div id="index-header-inner">
		<h1 id="zk-logo">
		<em>
			<a href="/" rel="canonical" title="ZK Home" name="top"><img width="63" src="http://www.zkoss.org/resource/img/template/top_zk_logo.png"
				title="ZK - Open Source Ajax Java Framework" alt="ZK - Open Source Ajax Java Framework" class="open-source-ajax" >ZK - Open Source Ajax Java Framework</a>
		</em>
		</h1>		
		
<div id="main_menu">
	<ul class='menu new-style'>
		<li class='menuitem '>
			<div class="menuitem-right">
				<a href="/product/" class="menulink">Products</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/product/zk" title="ZK">ZK</a>
	<div class="sep"></div></li>
<li><a href="/product/zkstudio" title="ZK Studio">ZK Studio</a>
	<div class="sep"></div></li>
<li><a href="/product/zkspring" title="ZK Spring">ZK Spring</a>
	<div class="sep"></div></li>
<li><a href="/product/zkspreadsheet" title="ZK Spreadsheet">ZK Spreadsheet</a>
	<div class="sep"></div></li>
<li><a href="/product/zkpivottable" title="ZK Pivottable">ZK Pivottable</a>
	<div class="sep"></div></li>
<li><a href="/product/zkcalendar" title="ZK Calendar">ZK Calendar</a>
	<div class="sep"></div></li>
<li><a href="/product/zkjsp" title="ZK JSP">ZK JSP</a>
	<div class="sep"></div></li>
<li class="bottom"><a href="http://www.zkoss.org/product/zats" title="ZTL">ZATS</a></li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a>
				</li>
			</ul>
		</li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/demo/" class="menulink">Demos</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/zkdemo/">ZK</a>
				<div class="sep"></div>
				</li>
				<li><a href="/product/zkstudio/demo">ZK Studio</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://zssdemo.zkoss.org">ZK SpreadSheet</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://www.zkoss.org/zkdemo/application/pivottable">ZK Pivottable</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://zcal.zkoss.org">ZK Calendar</a>
				<div class="sep"></div>
				</li>
				<li><a href="/zkmail/">ZK Web Mail</a>
				<div class="sep"></div>
				</li>
				<li><a href="/zksandbox">ZK Sandbox</a>
				<div class="sep"></div>
				</li>
				<li class="bottom"><a href="/demo/external">Real World Apps</a>
				</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/download/" class="menulink">Downloads</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/download/zk">ZK</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkstudio">ZK Studio</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkspring">ZK Spring</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkspreadsheet">ZK Spreadsheet</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkpivottable">ZK Pivottable</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkcalendar">ZK Calendar</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkjsp">ZK JSP</a>
	<div class="sep"></div>
</li>
<li class="bottom"><a href="http://www.zkoss.org/download/zats">ZATS</a>
</li>
<!--
		<li class="bottom"><a href="/download/ztl">ZTL</a>
				</li>
				 -->
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/whyzk/" class="menulink">Why ZK</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/whyzk/features">Features</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/TopReasons">Top Reasons</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/WhosUsing">Who's Using</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/casestudies">Case Studies</a>
	<div class="sep"></div>
</li>
<li class="bottom"><a href="/whyzk/Testimonials">Testimonials</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem menuitem-sel'>
			<div class="menuitem-right">
				<a href="/community/" class="menulink">Community</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/forum/">Forum</a>
  <div class="sep"></div>
</li>
<li><a href="http://blog.zkoss.org">Blog</a>
  <div class="sep"></div>
</li>
<li><a href="http://books.zkoss.org/wiki/Hall_of_Fame">Contributors</a>
  <div class="sep"></div>
</li>
<li><a href="http://books.zkoss.org/wiki/Blogosphere">Blogosphere</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation#Small_Talks">Small Talks</a>
  <div class="sep"></div>
</li>
<li><a href='http://tracker.zkoss.org/secure/IssueNavigator.jspa?mode=hide&amp;requestId=10002'>Request Features</a>
  <div class="sep"></div>
</li>
<li class="bottom"><a href='http://tracker.zkoss.org/secure/IssueNavigator.jspa?mode=hide&amp;requestId=10001'>Report Bugs</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/documentation" class="menulink">Documentation</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/documentation">ZK</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkstudio">ZK Studio</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkspring">ZK Spring</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkspreadsheet">ZK Spreadsheet</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkpivottable">ZK Pivottable</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkcalendar">ZK Calendar</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkjsp">ZK JSP</a>
  <div class="sep"></div>
</li>
<li class="bottom"><a href="http://www.zkoss.org/documentation/zats">ZATS</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/support/" class="menulink">Support</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/support/options">Support Options</a>
	<div class="sep"></div></li>
<li><a href="/partner/">Partners</a>
	<div class="sep"></div></li>
<li class="bottom"><a href="/support/about">About Us</a></li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
	</ul>

</div>
		





<div id="reglang-box">
	<script type="text/javascript">zkpb('oWWA_','z_pa80','/forum;jsessionid=756C5A443DB3275E951793825EA21D80','/forum/zkau;jsessionid=756C5A443DB3275E951793825EA21D80','/WEB-INF/website/template_header-search.jsp');zkpe();</script>
<div id="oWWA0" class="z-temp"><script src='/forum/zkau/web/dd3ed978/js/zul.breeze.wpd;jsessionid=756C5A443DB3275E951793825EA21D80'></script></div><script type="text/javascript">zk.pi=1;zkx(
['zul.wgt.Toolbarbutton','oWWA0',{sclass:'item',label:'Login',href:'/forum/login.zul;jsessionid=756C5A443DB3275E951793825EA21D80?path=http://www.zkoss.org/forum/listComment/20158-Automatic-Session-Timeout-With-Timer'},[]]);
</script>
<div id="oWWA1" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Toolbarbutton','oWWA1',{sclass:'item',label:'Register',href:'/forum/signup.zul;jsessionid=756C5A443DB3275E951793825EA21D80'},[]]);
</script>

</div>
<div id="search-box">
	<div id="searchBodyg">
		<form id="cse-search-box" action="/doc/searchresult.jsp" method="get">
			<div>
				<input type="hidden" name="cx" value="008321236477929467003:63kdpeqkkvw">
				
				<input type="hidden" name="cof" value="FORID:11">  
				<input class="searchinp" type="text" id="googleInput" value="" size="25" name="q" /> 
				<input id="sa" class="searchsubmit" type="submit" value="" name="sa" />
			</div>
		</form>
	</div>

	<div id="searchBodySql" style="display: none;">
		<form id="sql-search-box" action="/forum/searchSqlResult.jsp;jsessionid=756C5A443DB3275E951793825EA21D80" method="get">
			<div>
				<input type="hidden" value="1" name="PageIndex" /> 
				<input class="searchinp" type="text" id="sqlInput" value="" size="25" name="q" style=""/> 
				<input id="sa" class="searchsubmit" type="submit" value="" name="sa" />
			</div>
		</form>
	</div>
	<form id="searchchoice">
		<input class="rad" type="radio" CHECKED value="google" name="search">Google 
		<input class="rad" type="radio" value="SQL" name="search" />Database &nbsp;| 
		<a href="/forum/advanceSearch.zul;jsessionid=756C5A443DB3275E951793825EA21D80">Advanced Search</a>
	</form>
</div>

	</div>
</div>
		<div id="zk-template">
			<div id="template-inner">
<div id="container-top"></div>
<div id="internal"></div>
<div id="listComment">
	<div id="main">
		<div id="content-top"></div>
		<div id="content">
			<table border="0" width="98%" height="50px">
				<tr>
					<td>
			           <div id="category-navigation">
							<ul>
								<li class="category-home"><a href="/forum/;jsessionid=756C5A443DB3275E951793825EA21D80"><img src="/forum/images/home.png;jsessionid=756C5A443DB3275E951793825EA21D80" alt="Home"/></a></li>
								
									
									
										<li class="category"><a href="/forum/listDiscussion/14;jsessionid=756C5A443DB3275E951793825EA21D80">Help</a></li>
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/18;jsessionid=756C5A443DB3275E951793825EA21D80">ZK Studio</a></li>
									
									
										<li>|</li>
									
								
									
										<li class="category category-selected"><a href="/forum/listDiscussion/13;jsessionid=756C5A443DB3275E951793825EA21D80">General</a>
										</li>
									
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/15;jsessionid=756C5A443DB3275E951793825EA21D80">Announcements</a></li>
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/17;jsessionid=756C5A443DB3275E951793825EA21D80">Installation</a></li>
									
									
								
							</ul>
						</div>
			        </td>
				</tr>
			</table>
			<h2 id="discussionTitle">Automatic Session Timeout With Timer</h2>
			<!-- *************************** List Comments *************************** -->
			<script type="text/javascript">zkpb('oWWA4','z_pa80','/forum;jsessionid=756C5A443DB3275E951793825EA21D80','/forum/zkau;jsessionid=756C5A443DB3275E951793825EA21D80','/WEB-INF/website/template_header-search.jsp');zkpe();</script>
<div id="oWWA2" class="z-temp"><div class="author"><img class='author-image' title='asegner' src='/forum/mediaService?userId=37573&extName=null' /><span class="author-name">asegner</span></div><div><span class="comment-date">24 Jul 2012 15:38:54 GMT</span><div class="comment-cotent"><span class="comment-content">24 Jul 2012 15:38:54 GMT</span><p  style="margin:2px 2px;">I have a timer on a page <div style="class=code" class="code"><pre>					
     &lt;div&gt;
          &lt;timer id="timer" delay="5000" repeats="true" /&gt;
     &lt;/div&gt;
</pre></div></p><p> and in zk.xml<div style="class=code" class="code"><pre>
	&lt;session&#45;config&gt;
		&lt;session&#45;timeout&gt;5&lt;/session&#45;timeout&gt;
		&lt;timer&#45;keep&#45;alive&gt;false&lt;/timer&#45;keep&#45;alive&gt; 	
		&lt;timeout&#45;message&gt;script:WaitForUser()&lt;/timeout&#45;message&gt;
	&lt;/session&#45;config&gt;	
	&lt;session&#45;config&gt;
	    &lt;timer&#45;keep&#45;alive&gt;false&lt;/timer&#45;keep&#45;alive&gt; 	
         	&lt;device&#45;type&gt;ajax&lt;/device&#45;type&gt;
        	&lt;automatic&#45;timeout/&gt;
	&lt;/session&#45;config&gt;
</pre></div></p><p>PROBLEM: When the timer is removed from the page the session times out after 5 seconds and the script fires automatically after 5 seconds - good. However, if the timer is enabled, the session expires after 5 seconds, shown by the fact that if a user clicks anywhere the WaitForUser() script is fired, but the script doesnt fire immediately, it waits till after the last timer fires to start couting before it fires automatically - even though &lt;timer-keep-alive &gt; is false. So when the timer is enabled, I wont have the WaitForUser() js script fire till about 15 seconds. Is this a bug or is there more setup required?  </p><p>I would like for the timer events to not count towards the time of the automatic timeout.</p></div></div><div class="author"><img class='author-image' title='asegner' src='/forum/mediaService?userId=37573&extName=null' /><span class="author-name">asegner</span></div><div><span class="comment-date">24 Jul 2012 15:41:21 GMT</span><div class="comment-cotent"><span class="comment-content">24 Jul 2012 15:41:21 GMT</span><p  style="margin:2px 2px;">and i've stripped the timer callback to just the lines below with the same outcome<div style="class=code" class="code"><pre>
	public void onTimer$timer(final Event e) &#123;
		if (!stopTimer_) &#123;
			log_.trace("Firing application timer");
       &#125;
</pre></div></p></div></div><div class="author"><img class='author-image' title='asegner' src='/forum/mediaService?userId=37573&extName=null' /><span class="author-name">asegner</span></div><div><span class="comment-date">24 Jul 2012 17:59:10 GMT</span><div class="comment-cotent"><span class="comment-content">24 Jul 2012 17:59:10 GMT</span><p  style="margin:2px 2px;">i found this happens with any event, not only the timer, so if you use the server push to update the page. the session times out on the server in the correct amount of time, but the client side timer that fires the autotimeout message doesnt start until after the updates stop which is after the session on the server actually times out.  So the timeout message seems to always take twice as long to automatically fire; and it has a gap (during which there is no timeout message but the page will not react)  equal to the timeout</p></div></div><div class="author"><img class='author-image' title='asegner' src='/forum/mediaService?userId=37573&extName=null' /><span class="author-name">asegner</span></div><div><span class="comment-date">24 Jul 2012 18:05:28 GMT</span><div class="comment-cotent"><span class="comment-content">24 Jul 2012 18:05:28 GMT</span><p  style="margin:2px 2px;">&lt;org.zkoss.zk.version&gt;5.0.11&lt;/org.zkoss.zk.version&gt;<br/>		&lt;org.zkoss.zk.spring.version&gt;3.1&lt;/org.zkoss.zk.spring.version&gt;</p></div></div><div class="author"><img class='author-image' title='asegner' src='/forum/mediaService?userId=37573&extName=null' /><span class="author-name">asegner</span></div><div><span class="comment-date">24 Jul 2012 18:37:17 GMT</span><div class="comment-cotent"><span class="comment-content">24 Jul 2012 18:37:17 GMT</span><p  style="margin:2px 2px;">this should be in the help</p></div></div></div><script type="text/javascript">zkx(
['zul.wnd.Window','oWWA2',{$$onSize:false,$$onMaximize:false,$$onOpen:false,$$onMinimize:false,$$onZIndex:false,$onClose:true,$$onMove:false,width:'100%'},[
['zk.Native','oWWAd',{prolog:'<div class="c-middlebar">\r\n\t\t\t\t<table border="0" width="100%">\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align="left" style="width: 1%">\r\n\t\t\t\t\t\t\t<div class="c-newthread" align="right">'},[]],
['zul.wgt.Button','oWWA5',{sclass:'forumButton',label:'Reply',href:'/forum/login.zul;jsessionid=756C5A443DB3275E951793825EA21D80?path=http://www.zkoss.org/forum/listComment/20158-Automatic-Session-Timeout-With-Timer'},[]],
['zk.Native','oWWAe',{prolog:'</div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td align="right" style="width: 99%">\r\n\t\t\t\t\t        <div class="c-pages">\r\n\t\t\t\t\t            \r\n\t\t\t\t\t        </div>\r\n\t\t\t\t\t\t</td>\t\t\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t\t</div>'},[]],
['zul.grid.Grid','oWWA6',{id:'commentGrid',$$onRender:true,$onTopPad:false,$$onDataLoading:true,$onDataLoading:true,$$onInnerWidth:false,$$onPageSize:true,$$onScrollPos:false,style:'margin-top: 5px; margin-bottom: 5px;',model:true,_topPad:0,emptyMessage:null,_totalSize:5,_offset:0},[
['zul.grid.Columns','oWWA7',{$$onColSize:false},[
['zul.grid.Column','oWWA8',{$onSort:true,$onGroup:true,width:'140px'},[]],
['zul.grid.Column','oWWA9',{$onSort:true,$onGroup:true},[]]]],
['zul.grid.Rows','oWWAa',{sclass:'comment-rows',_offset:0,visibleItemCount:5},[
['zul.grid.Row','oWWAn',{_loaded:true,_index:0},[
['zul.wnd.Window','oWWAx',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','oWWAy',{prolog:'\n\t'},[
['zul.box.Vlayout','oWWAz',{},[
['zul.box.Hlayout','oWWA_0',{},[
['zul.wgt.Toolbarbutton','oWWA00',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'asegner'},[]]]],
['zul.wgt.Label','oWWA20',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','oWWA40',{},[]],
['zul.wgt.Div','oWWA70',{},[
['zul.wgt.Label','oWWA80',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','oWWA90',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'15'},[]]]],
['zul.wgt.Div','oWWAa0',{},[
['zul.wgt.Label','oWWAb0',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','oWWAc0',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jan 21, 2011'},[]]]],
['zul.wgt.Div','oWWAd0',{},[]],
['zul.wgt.Div','oWWAf0',{},[]]],'vertical']]],
['zul.wnd.Window','oWWAh0',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','oWWAi0',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','oWWAj0',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','oWWAk0',{id:'dateCreated',sclass:'comment-date',value:'16 hrs ago'},[]],
['zul.wgt.Div','oWWAl0',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','oWWAo0',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">I have a timer on a page <div style="class=code" class="code"><pre>\t\t\t\t\t\n     &lt;div&gt;\n          &lt;timer id="timer" delay="5000" repeats="true" /&gt;\n     &lt;/div&gt;\n</pre></div></p><p> and in zk.xml<div style="class=code" class="code"><pre>\n\t&lt;session&#45;config&gt;\n\t\t&lt;session&#45;timeout&gt;5&lt;/session&#45;timeout&gt;\n\t\t&lt;timer&#45;keep&#45;alive&gt;false&lt;/timer&#45;keep&#45;alive&gt; \t\n\t\t&lt;timeout&#45;message&gt;script:WaitForUser()&lt;/timeout&#45;message&gt;\n\t&lt;/session&#45;config&gt;\t\n\t&lt;session&#45;config&gt;\n\t    &lt;timer&#45;keep&#45;alive&gt;false&lt;/timer&#45;keep&#45;alive&gt; \t\n         \t&lt;device&#45;type&gt;ajax&lt;/device&#45;type&gt;\n        \t&lt;automatic&#45;timeout/&gt;\n\t&lt;/session&#45;config&gt;\n</pre></div></p><p>PROBLEM: When the timer is removed from the page the session times out after 5 seconds and the script fires automatically after 5 seconds - good. However, if the timer is enabled, the session expires after 5 seconds, shown by the fact that if a user clicks anywhere the WaitForUser() script is fired, but the script doesnt fire immediately, it waits till after the last timer fires to start couting before it fires automatically - even though &lt;timer-keep-alive &gt; is false. So when the timer is enabled, I wont have the WaitForUser() js script fire till about 15 seconds. Is this a bug or is there more setup required?  </p><p>I would like for the timer events to not count towards the time of the automatic timeout.</p>'},[]],
['zul.wgt.Separator','oWWAp0',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','oWWAq0',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','oWWAr0',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]],
['zul.grid.Row','oWWAp',{_loaded:true,_index:1},[
['zul.wnd.Window','oWWAs0',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','oWWAt0',{prolog:'\n\t'},[
['zul.box.Vlayout','oWWAu0',{},[
['zul.box.Hlayout','oWWAv0',{},[
['zul.wgt.Toolbarbutton','oWWAw0',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'asegner'},[]]]],
['zul.wgt.Label','oWWAy0',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','oWWA_1',{},[]],
['zul.wgt.Div','oWWA21',{},[
['zul.wgt.Label','oWWA31',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','oWWA41',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'15'},[]]]],
['zul.wgt.Div','oWWA51',{},[
['zul.wgt.Label','oWWA61',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','oWWA71',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jan 21, 2011'},[]]]],
['zul.wgt.Div','oWWA81',{},[]],
['zul.wgt.Div','oWWAa1',{},[]]],'vertical']]],
['zul.wnd.Window','oWWAc1',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','oWWAd1',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','oWWAe1',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','oWWAf1',{id:'dateCreated',sclass:'comment-date',value:'16 hrs ago'},[]],
['zul.wgt.Div','oWWAg1',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','oWWAj1',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">and i\'ve stripped the timer callback to just the lines below with the same outcome<div style="class=code" class="code"><pre>\n\tpublic void onTimer$timer(final Event e) &#123;\n\t\tif (!stopTimer_) &#123;\n\t\t\tlog_.trace("Firing application timer");\n       &#125;\n</pre></div></p>'},[]],
['zul.wgt.Separator','oWWAk1',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','oWWAl1',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','oWWAm1',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]],
['zul.grid.Row','oWWAr',{_loaded:true,_index:2},[
['zul.wnd.Window','oWWAn1',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','oWWAo1',{prolog:'\n\t'},[
['zul.box.Vlayout','oWWAp1',{},[
['zul.box.Hlayout','oWWAq1',{},[
['zul.wgt.Toolbarbutton','oWWAr1',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'asegner'},[]]]],
['zul.wgt.Label','oWWAt1',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','oWWAv1',{},[]],
['zul.wgt.Div','oWWAy1',{},[
['zul.wgt.Label','oWWAz1',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','oWWA_2',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'15'},[]]]],
['zul.wgt.Div','oWWA02',{},[
['zul.wgt.Label','oWWA12',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','oWWA22',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jan 21, 2011'},[]]]],
['zul.wgt.Div','oWWA32',{},[]],
['zul.wgt.Div','oWWA52',{},[]]],'vertical']]],
['zul.wnd.Window','oWWA72',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','oWWA82',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','oWWA92',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','oWWAa2',{id:'dateCreated',sclass:'comment-date',value:'13 hrs ago'},[]],
['zul.wgt.Div','oWWAb2',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','oWWAe2',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">i found this happens with any event, not only the timer, so if you use the server push to update the page. the session times out on the server in the correct amount of time, but the client side timer that fires the autotimeout message doesnt start until after the updates stop which is after the session on the server actually times out.  So the timeout message seems to always take twice as long to automatically fire; and it has a gap (during which there is no timeout message but the page will not react)  equal to the timeout</p>'},[]],
['zul.wgt.Separator','oWWAf2',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','oWWAg2',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','oWWAh2',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]],
['zul.grid.Row','oWWAt',{_loaded:true,_index:3},[
['zul.wnd.Window','oWWAi2',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','oWWAj2',{prolog:'\n\t'},[
['zul.box.Vlayout','oWWAk2',{},[
['zul.box.Hlayout','oWWAl2',{},[
['zul.wgt.Toolbarbutton','oWWAm2',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'asegner'},[]]]],
['zul.wgt.Label','oWWAo2',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','oWWAq2',{},[]],
['zul.wgt.Div','oWWAt2',{},[
['zul.wgt.Label','oWWAu2',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','oWWAv2',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'15'},[]]]],
['zul.wgt.Div','oWWAw2',{},[
['zul.wgt.Label','oWWAx2',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','oWWAy2',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jan 21, 2011'},[]]]],
['zul.wgt.Div','oWWAz2',{},[]],
['zul.wgt.Div','oWWA03',{},[]]],'vertical']]],
['zul.wnd.Window','oWWA23',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','oWWA33',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','oWWA43',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','oWWA53',{id:'dateCreated',sclass:'comment-date',value:'13 hrs ago'},[]],
['zul.wgt.Div','oWWA63',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','oWWA93',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">&lt;org.zkoss.zk.version&gt;5.0.11&lt;/org.zkoss.zk.version&gt;<br/>\t\t&lt;org.zkoss.zk.spring.version&gt;3.1&lt;/org.zkoss.zk.spring.version&gt;</p>'},[]],
['zul.wgt.Separator','oWWAa3',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','oWWAb3',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','oWWAc3',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]],
['zul.grid.Row','oWWAv',{_loaded:true,_index:4},[
['zul.wnd.Window','oWWAd3',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','oWWAe3',{prolog:'\n\t'},[
['zul.box.Vlayout','oWWAf3',{},[
['zul.box.Hlayout','oWWAg3',{},[
['zul.wgt.Toolbarbutton','oWWAh3',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'asegner'},[]]]],
['zul.wgt.Label','oWWAj3',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','oWWAl3',{},[]],
['zul.wgt.Div','oWWAo3',{},[
['zul.wgt.Label','oWWAp3',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','oWWAq3',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'15'},[]]]],
['zul.wgt.Div','oWWAr3',{},[
['zul.wgt.Label','oWWAs3',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','oWWAt3',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jan 21, 2011'},[]]]],
['zul.wgt.Div','oWWAu3',{},[]],
['zul.wgt.Div','oWWAw3',{},[]]],'vertical']]],
['zul.wnd.Window','oWWAy3',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','oWWAz3',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','oWWA_4',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','oWWA04',{id:'dateCreated',sclass:'comment-date',value:'13 hrs ago'},[]],
['zul.wgt.Div','oWWA14',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','oWWA44',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">this should be in the help</p>'},[]],
['zul.wgt.Separator','oWWA54',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','oWWA64',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','oWWA74',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]]]]]],
['zul.wgt.Popup','oWWAb',{id:'authorPopup',visible:false,$$onOpen:false,sclass:'user-popup'},[]],
['zul.wgt.Label','oWWAc',{id:'anchor',visible:false},[]]]]);
</script>
<div id="oWWAf" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Label','oWWAf',{},[]]);
</script>
<div class="c-middlebar">
				<table border="0" width="100%">
					<tr>
						<td align="left" style="width: 1%">
							<div class="c-newthread" align="right"><div id="oWWAg" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Button','oWWAg',{sclass:'forumButton',label:'Reply',href:'/forum/login.zul;jsessionid=756C5A443DB3275E951793825EA21D80?path=http://www.zkoss.org/forum/listComment/20158-Automatic-Session-Timeout-With-Timer'},[]]);
</script>
</div>
						</td>
						<td align="right" style="width: 99%">
					        <div class="c-pages">
					            
					        </div>
						</td>		
					</tr>
				</table>
			</div>
			
			<br /><div id="oWWAh" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Div','oWWAh',{id:'comment-reply'},[
['zk.Native','oWWAk',{prolog:'<a name="reply"></a>'},[]],
['zk.Macro','oWWAi',{},[]],
['zul.wgt.Label','oWWAj',{},[]]]]);
</script>

		<div id="content-bottom"></div>
	</div>	
	</div>
</div>
	
<script type="text/javascript" 	src="/forum/js/commentCodeHandle.js;jsessionid=756C5A443DB3275E951793825EA21D80" ></script>



</div> </div>
<!-- Google  -->
<script type="text/javascript">
 var z_n = "null",
	z_i = "220.135.202.140" ;
 var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
 document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://www.zkoss.org/resource/js/page/gaz.js"></script>
<script type="text/javascript" src="/forum/js/template.js;jsessionid=756C5A443DB3275E951793825EA21D80"></script>
<!-- Google  -->
<div id="footer-2">
	<div id="footer-2-inner">
		<img src="http://sourceforge.net/sflogo.php?group_id=152762&amp;type=1" width="0" height="0" alt="SourceForge" style="float:right;">
		
		<div id="footer-txt">
		<div class="contacts"><a href="http://www.zkoss.org/support/about/contact" title="Contact Us">Contact Us</a></div>
		&#169; 2012 Potix Corporation. All rights reserved.<br />
		ZK is a trademark of Potix Corporation.</div>
		<div id="partners">
			<div class="txt">Partners :</div>
			<div class="allpartners"><a href="/partner/" title="ZK Partners">Partners</a></div>
		</div>
	</div>
</div>
</div>
</body>
</html>
</body>
</html>
