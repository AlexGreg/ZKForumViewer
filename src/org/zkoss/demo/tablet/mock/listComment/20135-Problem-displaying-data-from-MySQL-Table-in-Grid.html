












<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" >
	<meta http-equiv="X-UA-Compatible" content="chrome=1">	
	<link rel="shortcut icon" type="image/ico" href="/resource/img/favicon.ico" >
	<link rel="bookmark" href="/resource/img/favicon.ico" >
	<link href="http://feeds.feedburner.com/zkoss?format=xml" rel="alternate" type="application/rss+xml" title="ZK RSS FEED" />
	<link rel="stylesheet" type="text/css" href='/forum/css/website/template.css.dsp;jsessionid=95BBF42E514267F7EA99DEB71496D97E'	/>
	<link type="text/css" rel="stylesheet" href='/forum/less/index;jsessionid=95BBF42E514267F7EA99DEB71496D97E?1343202445815' />
<title>Problem displaying data from MySQL Table in Grid | Forum | ZK </title>
<meta name="keywords" content="ajax zk forum" />
<meta name="description" content="Problem displaying data from MySQL Table in Grid"/> 
<meta name="Robots" content="all"/>
<meta name="author" content="tuconsulting"/>
<meta name="classification" content="forum"/>
<meta name="generator" content="zk jsp"/>


<link rel="stylesheet" type="text/css" href="/forum/zkau/web/dd3ed978/_zkiju-breeze/zul/css/zk.wcs;jsessionid=95BBF42E514267F7EA99DEB71496D97E"/>

<script type="text/javascript" src="/forum/zkau/web/dd3ed978/js/zk.wpd;jsessionid=95BBF42E514267F7EA99DEB71496D97E" charset="UTF-8">
</script>
<script type="text/javascript" src="/forum/zkau/web/dd3ed978/js/zul.lang.wpd;jsessionid=95BBF42E514267F7EA99DEB71496D97E" charset="UTF-8">
</script>
<!-- ZK 5.0.9 EE 2011102015 Evaluation Only -->

<script type="text/javascript" src='/forum/js/zorum.js.dsp;jsessionid=95BBF42E514267F7EA99DEB71496D97E' charset="UTF-8">
</script>
<style>
	.gridRows iframe{
		border:none;
	}
	.fiddleiframe{
		display:none;
	}
	.commentBody iframe{
	   border:none;	
	}	
</style>
</head>
<body class="zk-forum">
	<div id="zk-container">
		<div id="index-header">
		<div id="index-header-inner">
		<h1 id="zk-logo">
		<em>
			<a href="/" rel="canonical" title="ZK Home" name="top"><img width="63" src="http://www.zkoss.org/resource/img/template/top_zk_logo.png"
				title="ZK - Open Source Ajax Java Framework" alt="ZK - Open Source Ajax Java Framework" class="open-source-ajax" >ZK - Open Source Ajax Java Framework</a>
		</em>
		</h1>		
		
<div id="main_menu">
	<ul class='menu new-style'>
		<li class='menuitem '>
			<div class="menuitem-right">
				<a href="/product/" class="menulink">Products</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/product/zk" title="ZK">ZK</a>
	<div class="sep"></div></li>
<li><a href="/product/zkstudio" title="ZK Studio">ZK Studio</a>
	<div class="sep"></div></li>
<li><a href="/product/zkspring" title="ZK Spring">ZK Spring</a>
	<div class="sep"></div></li>
<li><a href="/product/zkspreadsheet" title="ZK Spreadsheet">ZK Spreadsheet</a>
	<div class="sep"></div></li>
<li><a href="/product/zkpivottable" title="ZK Pivottable">ZK Pivottable</a>
	<div class="sep"></div></li>
<li><a href="/product/zkcalendar" title="ZK Calendar">ZK Calendar</a>
	<div class="sep"></div></li>
<li><a href="/product/zkjsp" title="ZK JSP">ZK JSP</a>
	<div class="sep"></div></li>
<li class="bottom"><a href="http://www.zkoss.org/product/zats" title="ZTL">ZATS</a></li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a>
				</li>
			</ul>
		</li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/demo/" class="menulink">Demos</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/zkdemo/">ZK</a>
				<div class="sep"></div>
				</li>
				<li><a href="/product/zkstudio/demo">ZK Studio</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://zssdemo.zkoss.org">ZK SpreadSheet</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://www.zkoss.org/zkdemo/application/pivottable">ZK Pivottable</a>
				<div class="sep"></div>
				</li>
				<li><a href="http://zcal.zkoss.org">ZK Calendar</a>
				<div class="sep"></div>
				</li>
				<li><a href="/zkmail/">ZK Web Mail</a>
				<div class="sep"></div>
				</li>
				<li><a href="/zksandbox">ZK Sandbox</a>
				<div class="sep"></div>
				</li>
				<li class="bottom"><a href="/demo/external">Real World Apps</a>
				</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/download/" class="menulink">Downloads</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/download/zk">ZK</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkstudio">ZK Studio</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkspring">ZK Spring</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkspreadsheet">ZK Spreadsheet</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkpivottable">ZK Pivottable</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkcalendar">ZK Calendar</a>
	<div class="sep"></div>
</li>
<li><a href="/download/zkjsp">ZK JSP</a>
	<div class="sep"></div>
</li>
<li class="bottom"><a href="http://www.zkoss.org/download/zats">ZATS</a>
</li>
<!--
		<li class="bottom"><a href="/download/ztl">ZTL</a>
				</li>
				 -->
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/whyzk/" class="menulink">Why ZK</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/whyzk/features">Features</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/TopReasons">Top Reasons</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/WhosUsing">Who's Using</a>
	<div class="sep"></div>
</li>
<li><a href="/whyzk/casestudies">Case Studies</a>
	<div class="sep"></div>
</li>
<li class="bottom"><a href="/whyzk/Testimonials">Testimonials</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem menuitem-sel'>
			<div class="menuitem-right">
				<a href="/community/" class="menulink">Community</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/forum/">Forum</a>
  <div class="sep"></div>
</li>
<li><a href="http://blog.zkoss.org">Blog</a>
  <div class="sep"></div>
</li>
<li><a href="http://books.zkoss.org/wiki/Hall_of_Fame">Contributors</a>
  <div class="sep"></div>
</li>
<li><a href="http://books.zkoss.org/wiki/Blogosphere">Blogosphere</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation#Small_Talks">Small Talks</a>
  <div class="sep"></div>
</li>
<li><a href='http://tracker.zkoss.org/secure/IssueNavigator.jspa?mode=hide&amp;requestId=10002'>Request Features</a>
  <div class="sep"></div>
</li>
<li class="bottom"><a href='http://tracker.zkoss.org/secure/IssueNavigator.jspa?mode=hide&amp;requestId=10001'>Report Bugs</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/documentation" class="menulink">Documentation</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/documentation">ZK</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkstudio">ZK Studio</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkspring">ZK Spring</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkspreadsheet">ZK Spreadsheet</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkpivottable">ZK Pivottable</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkcalendar">ZK Calendar</a>
  <div class="sep"></div>
</li>
<li><a href="/documentation/zkjsp">ZK JSP</a>
  <div class="sep"></div>
</li>
<li class="bottom"><a href="http://www.zkoss.org/documentation/zats">ZATS</a>
</li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
		<li class='menuitem'>
			<div class="menuitem-right">
				<a href="/support/" class="menulink">Support</a>
			</div>
			<ul>
				<li class="round-top"></li>
				<li class="top"><a href="/support/options">Support Options</a>
	<div class="sep"></div></li>
<li><a href="/partner/">Partners</a>
	<div class="sep"></div></li>
<li class="bottom"><a href="/support/about">About Us</a></li>
				<li class="round-bottom"></li>
				<li class="touch-close"><a title="Close Menu" href="#"></a></li>
			</ul></li>
	</ul>

</div>
		





<div id="reglang-box">
	<script type="text/javascript">zkpb('d7DW_','z_gr_0','/forum;jsessionid=95BBF42E514267F7EA99DEB71496D97E','/forum/zkau;jsessionid=95BBF42E514267F7EA99DEB71496D97E','/WEB-INF/website/template_header-search.jsp');zkpe();</script>
<div id="d7DW0" class="z-temp"><script src='/forum/zkau/web/dd3ed978/js/zul.breeze.wpd;jsessionid=95BBF42E514267F7EA99DEB71496D97E'></script></div><script type="text/javascript">zk.pi=1;zkx(
['zul.wgt.Toolbarbutton','d7DW0',{sclass:'item',label:'Login',href:'/forum/login.zul;jsessionid=95BBF42E514267F7EA99DEB71496D97E?path=http://www.zkoss.org/forum/listComment/20135-Problem-displaying-data-from-MySQL-Table-in-Grid'},[]]);
</script>
<div id="d7DW1" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Toolbarbutton','d7DW1',{sclass:'item',label:'Register',href:'/forum/signup.zul;jsessionid=95BBF42E514267F7EA99DEB71496D97E'},[]]);
</script>

</div>
<div id="search-box">
	<div id="searchBodyg">
		<form id="cse-search-box" action="/doc/searchresult.jsp" method="get">
			<div>
				<input type="hidden" name="cx" value="008321236477929467003:63kdpeqkkvw">
				
				<input type="hidden" name="cof" value="FORID:11">  
				<input class="searchinp" type="text" id="googleInput" value="" size="25" name="q" /> 
				<input id="sa" class="searchsubmit" type="submit" value="" name="sa" />
			</div>
		</form>
	</div>

	<div id="searchBodySql" style="display: none;">
		<form id="sql-search-box" action="/forum/searchSqlResult.jsp;jsessionid=95BBF42E514267F7EA99DEB71496D97E" method="get">
			<div>
				<input type="hidden" value="1" name="PageIndex" /> 
				<input class="searchinp" type="text" id="sqlInput" value="" size="25" name="q" style=""/> 
				<input id="sa" class="searchsubmit" type="submit" value="" name="sa" />
			</div>
		</form>
	</div>
	<form id="searchchoice">
		<input class="rad" type="radio" CHECKED value="google" name="search">Google 
		<input class="rad" type="radio" value="SQL" name="search" />Database &nbsp;| 
		<a href="/forum/advanceSearch.zul;jsessionid=95BBF42E514267F7EA99DEB71496D97E">Advanced Search</a>
	</form>
</div>

	</div>
</div>
		<div id="zk-template">
			<div id="template-inner">
<div id="container-top"></div>
<div id="internal"></div>
<div id="listComment">
	<div id="main">
		<div id="content-top"></div>
		<div id="content">
			<table border="0" width="98%" height="50px">
				<tr>
					<td>
			           <div id="category-navigation">
							<ul>
								<li class="category-home"><a href="/forum/;jsessionid=95BBF42E514267F7EA99DEB71496D97E"><img src="/forum/images/home.png;jsessionid=95BBF42E514267F7EA99DEB71496D97E" alt="Home"/></a></li>
								
									
										<li class="category category-selected"><a href="/forum/listDiscussion/14;jsessionid=95BBF42E514267F7EA99DEB71496D97E">Help</a>
										</li>
									
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/18;jsessionid=95BBF42E514267F7EA99DEB71496D97E">ZK Studio</a></li>
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/13;jsessionid=95BBF42E514267F7EA99DEB71496D97E">General</a></li>
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/15;jsessionid=95BBF42E514267F7EA99DEB71496D97E">Announcements</a></li>
									
									
										<li>|</li>
									
								
									
									
										<li class="category"><a href="/forum/listDiscussion/17;jsessionid=95BBF42E514267F7EA99DEB71496D97E">Installation</a></li>
									
									
								
							</ul>
						</div>
			        </td>
				</tr>
			</table>
			<h2 id="discussionTitle">Problem displaying data from MySQL Table in Grid</h2>
			<!-- *************************** List Comments *************************** -->
			<script type="text/javascript">zkpb('d7DW4','z_gr_0','/forum;jsessionid=95BBF42E514267F7EA99DEB71496D97E','/forum/zkau;jsessionid=95BBF42E514267F7EA99DEB71496D97E','/WEB-INF/website/template_header-search.jsp');zkpe();</script>
<div id="d7DW2" class="z-temp"><div class="author"><img class='author-image' title='tuconsulting' src='/forum/mediaService?userId=57323&extName=null' /><span class="author-name">tuconsulting</span></div><div><span class="comment-date">21 Jul 2012 09:33:06 GMT</span><div class="comment-cotent"><span class="comment-content">21 Jul 2012 09:33:06 GMT</span><p  style="margin:2px 2px;">Hey guys,</p><p>I worked through the examples etc. and got the code below that should just simply display values from an existing MySQL table. So my approach was to #1 write the ZUL where the grid should be displayed, #2 write the data connection to MySQL, #3 fetch the data and store it in a list and #4 finally write a renderer to hand the list over to a grid model. The code is not working and I might already know the problem:</p><p>#1 retrieving the list in the renderer class does not work I guess<br/>#2 handing the list over to the grid model does not work</p><p>I would be happy if you could give me some help over here, thanks in advance.</p><p>index.zul:<div style="class=code" class="code"><pre>&lt;zk&gt;
	&lt;grid fixedLayout="true" model="$&#123;model&#125;" rowRenderer="$&#123;renderer&#125;" autopaging="true" mold="paging" vflex="true"&gt;
	 	&lt;columns sizable="true" menupopup="auto"&gt;
	       &lt;column width="80px" label="Info" sort="auto"/&gt;
	       &lt;column width="200" label="Subject" sort="auto"/&gt;
	       &lt;column width="150px" label="Received" sort="auto"/&gt;
	       &lt;column width="50px" label="Size" sort="auto"/&gt;
	     &lt;/columns&gt;
	&lt;/grid&gt;
&lt;/zk&gt;</pre></div><br/><hr /><br/>data_connection.java<div style="class=code" class="code"><pre>package grid;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class data_connection &#123;

	static &#123;
		try &#123;
			Class.forName("com.mysql.jdbc.Driver");
		&#125; catch (ClassNotFoundException e) &#123;
			throw new IllegalStateException(e);
		&#125;
	&#125;
	
	public static void runConnection(String dbName, 
			ConnectionRunner runner) throws SQLException &#123;
		Connection conn = null;
		try &#123;
			conn = DriverManager.getConnection(getDBUrl(dbName), "root", "root");
			runner.run(conn);
		&#125; finally &#123;
			if (conn != null && !conn.isClosed())
				conn.close();
		&#125;
	&#125;
	
	public interface ConnectionRunner &#123;
		public void run(Connection conn) throws SQLException;
	&#125;
	
	private static String getDBUrl(String dbName) &#123;
		return "jdbc:mysql://localhost:3306" + "/" + dbName;
	&#125;
&#125;
</pre></div><br/><hr /></p><p>get_data.java:<div style="class=code" class="code"><pre>package grid;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.zkoss.zul.ListModel;
import org.zkoss.zul.SimpleListModel;

import grid.data_connection;
import grid.data_connection.ConnectionRunner;
import gridex.EjemploRenderer;

public class get_data &#123;
	
	private static final String DB_NAME = "db_name";
	
	private static final String TABLE_NAME = "table_name";

    private static final String[] COLUMNS = new String[]&#123;
     "Subject",
    "Received",
    "Size"
    &#125;;
    
    private static final List&lt;String&gt; COLUMN_LBS = Arrays.asList(new String[]&#123;
    "Subject",
    "Received",
    "Size"
            &#125;);
	
	public List&lt;List&lt;Object&gt;&gt; getData(String dbName, final String tableName, final String[] columns) throws SQLException &#123;

		final boolean selectStar = columns == null || columns.length == 0;
		final List&lt;List&lt;Object&gt;&gt; list = new ArrayList&lt;List&lt;Object&gt;&gt;();

		data_connection.runConnection( dbName, new ConnectionRunner() &#123;
			public void run(Connection conn) throws SQLException &#123;
				Statement stmt = conn.createStatement();
				String query = "SELECT &#42; FROM " + tableName;
				
                    query += " LIMIT 1000"; // Limitierung der Daten auf die ersten 1.000 Zeilen
                    
				ResultSet res = stmt.executeQuery(query);
				while (res.next()) &#123;
					List&lt;Object&gt; row = new ArrayList&lt;Object&gt;();
					for (String col : columns)
						row.add(res.getObject(col));
					list.add(row);
				&#125;
				res.close();
			&#125;
		&#125;);

		return list;		
		
		
	&#125;

&#125;
</pre></div><br/><hr /></p><p>MyRenderer.java:<div style="class=code" class="code"><pre>package grid;

import org.zkoss.zul.Div;
import org.zkoss.zul.Image;
import org.zkoss.zul.Label;
import org.zkoss.zul.Row;
import org.zkoss.zul.RowRenderer;

public 	class MyRenderer implements RowRenderer&#123;
	public void render(Row row, java.lang.Object data) &#123;
		if(data instanceof String[]) &#123;
			String[] ary = (String[]) data;
            Div div = new Div();
            Image icon = new Image();
            icon.setStyle("padding: 0px 10px");
            icon.setSrc("info.png");
            div.appendChild(icon);
            new Label(ary[0]).setParent(div);
            row.appendChild(div);
            new Label(ary[1]).setParent(row);
            new Label(ary[2]).setParent(row);
            new Label(ary[3]).setParent(row);
		&#125;
	&#125;

	@Override
	public void render(Row row, Object data, int index) throws Exception &#123;
		
	&#125;

MyRenderer renderer = new MyRenderer();
ListModel model = new ListModelList(grid.get_data.list);

&#125;
</pre></div></p></div></div><div class="author"><img class='author-image' title='benbai' src='/forum/mediaService?userId=41078&extName=null' /><span class="author-name">benbai</span></div><div><span class="comment-date">25 Jul 2012 03:22:38 GMT</span><div class="comment-cotent"><span class="comment-content">25 Jul 2012 03:22:38 GMT</span><p  style="margin:2px 2px;">Hi tuconsulting,</p><p>You need a composer to handle it, for example, </p><p>zul file:<div style="class=code" class="code"><pre>
&lt;zk&gt;
	&lt;div id="outer" apply="test.TestComposer"&gt;
		&lt;grid fixedLayout="true" model="$&#123;outer$composer.model&#125;"
			rowRenderer="$&#123;outer$composer.renderer&#125;"
			autopaging="true" mold="paging" vflex="true"&gt;
		 	&lt;columns sizable="true" menupopup="auto"&gt;
		       &lt;column width="80px" label="Info" sort="auto"/&gt;
		       &lt;column width="200" label="Subject" sort="auto"/&gt;
		       &lt;column width="150px" label="Received" sort="auto"/&gt;
		       &lt;column width="50px" label="Size" sort="auto"/&gt;
		     &lt;/columns&gt;
		&lt;/grid&gt;
	&lt;/div&gt;
&lt;/zk&gt;
</pre></div></p><p>The composer<div style="class=code" class="code"><pre>
package test;

import java.util.&#42;;

import org.zkoss.zk.ui.util.GenericForwardComposer;
import org.zkoss.zul.&#42;;

public class TestComposer extends GenericForwardComposer &#123;
	
	private ListModel _model;
	private MyRenderer _renderer = new MyRenderer();
	public ListModel getModel () &#123;
		if (_model == null) &#123;
			_model = new ListModelList(getData());
		&#125;
		return _model;
	&#125;
	public RowRenderer getRenderer () &#123;
		return _renderer;
	&#125;
	// return data list
	private List getData() &#123;
		List l = new ArrayList();
		for (int i = 0; i &lt; 10; i++) &#123;
			String[] s = &#123;"data " + i + " 0",
					"data " + i + " 1",
					"data " + i + " 2",
					"data " + i + " 3"
			&#125;;
			l.add(s);
		&#125;
		return l;
	&#125;
	class MyRenderer implements RowRenderer&#123;
		public void render(Row row, java.lang.Object data) &#123;
			if(data instanceof String[]) &#123;
				String[] ary = (String[]) data;
	            Div div = new Div();
	            Image icon = new Image();
	            icon.setStyle("padding: 0px 10px");
	            icon.setSrc("info.png");
	            div.appendChild(icon);
	            new Label(ary[0]).setParent(div);
	            row.appendChild(div);
	            new Label(ary[1]).setParent(row);
	            new Label(ary[2]).setParent(row);
	            new Label(ary[3]).setParent(row);
			&#125;
		&#125;

		public void render(Row row, Object data, int index) throws Exception &#123;
			render(row, data); // don't care index
		&#125;
	&#125;
&#125;

</pre></div></p><p>Regards,<br/>Ben</p></div></div></div><script type="text/javascript">zkx(
['zul.wnd.Window','d7DW2',{$$onSize:false,$$onMaximize:false,$$onOpen:false,$$onMinimize:false,$$onZIndex:false,$onClose:true,$$onMove:false,width:'100%'},[
['zk.Native','d7DWd',{prolog:'<div class="c-middlebar">\r\n\t\t\t\t<table border="0" width="100%">\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align="left" style="width: 1%">\r\n\t\t\t\t\t\t\t<div class="c-newthread" align="right">'},[]],
['zul.wgt.Button','d7DW5',{sclass:'forumButton',label:'Reply',href:'/forum/login.zul;jsessionid=95BBF42E514267F7EA99DEB71496D97E?path=http://www.zkoss.org/forum/listComment/20135-Problem-displaying-data-from-MySQL-Table-in-Grid'},[]],
['zk.Native','d7DWe',{prolog:'</div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td align="right" style="width: 99%">\r\n\t\t\t\t\t        <div class="c-pages">\r\n\t\t\t\t\t            \r\n\t\t\t\t\t        </div>\r\n\t\t\t\t\t\t</td>\t\t\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t\t</div>'},[]],
['zul.grid.Grid','d7DW6',{id:'commentGrid',$$onRender:true,$onTopPad:false,$$onDataLoading:true,$onDataLoading:true,$$onInnerWidth:false,$$onPageSize:true,$$onScrollPos:false,style:'margin-top: 5px; margin-bottom: 5px;',model:true,_topPad:0,emptyMessage:null,_totalSize:2,_offset:0},[
['zul.grid.Columns','d7DW7',{$$onColSize:false},[
['zul.grid.Column','d7DW8',{$onSort:true,$onGroup:true,width:'140px'},[]],
['zul.grid.Column','d7DW9',{$onSort:true,$onGroup:true},[]]]],
['zul.grid.Rows','d7DWa',{sclass:'comment-rows',_offset:0,visibleItemCount:2},[
['zul.grid.Row','d7DWn',{_loaded:true,_index:0},[
['zul.wnd.Window','d7DWr',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','d7DWs',{prolog:'\n\t'},[
['zul.box.Vlayout','d7DWt',{},[
['zul.box.Hlayout','d7DWu',{},[
['zul.wgt.Toolbarbutton','d7DWv',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'tuconsulting'},[]]]],
['zul.wgt.Label','d7DWx',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','d7DWz',{},[]],
['zul.wgt.Div','d7DW10',{},[
['zul.wgt.Label','d7DW20',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','d7DW30',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'1'},[]]]],
['zul.wgt.Div','d7DW40',{},[
['zul.wgt.Label','d7DW50',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','d7DW60',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Jul 09, 2012'},[]]]],
['zul.wgt.Div','d7DW70',{},[]],
['zul.wgt.Div','d7DW90',{},[]]],'vertical']]],
['zul.wnd.Window','d7DWb0',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','d7DWc0',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','d7DWd0',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','d7DWe0',{id:'dateCreated',sclass:'comment-date',value:'3 days ago'},[]],
['zul.wgt.Div','d7DWf0',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','d7DWi0',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">Hey guys,</p><p>I worked through the examples etc. and got the code below that should just simply display values from an existing MySQL table. So my approach was to #1 write the ZUL where the grid should be displayed, #2 write the data connection to MySQL, #3 fetch the data and store it in a list and #4 finally write a renderer to hand the list over to a grid model. The code is not working and I might already know the problem:</p><p>#1 retrieving the list in the renderer class does not work I guess<br/>#2 handing the list over to the grid model does not work</p><p>I would be happy if you could give me some help over here, thanks in advance.</p><p>index.zul:<div style="class=code" class="code"><pre>&lt;zk&gt;\n\t&lt;grid fixedLayout="true" model="$&#123;model&#125;" rowRenderer="$&#123;renderer&#125;" autopaging="true" mold="paging" vflex="true"&gt;\n\t \t&lt;columns sizable="true" menupopup="auto"&gt;\n\t       &lt;column width="80px" label="Info" sort="auto"/&gt;\n\t       &lt;column width="200" label="Subject" sort="auto"/&gt;\n\t       &lt;column width="150px" label="Received" sort="auto"/&gt;\n\t       &lt;column width="50px" label="Size" sort="auto"/&gt;\n\t     &lt;/columns&gt;\n\t&lt;/grid&gt;\n&lt;/zk&gt;</pre></div><br/><hr /><br/>data_connection.java<div style="class=code" class="code"><pre>package grid;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class data_connection &#123;\n\n\tstatic &#123;\n\t\ttry &#123;\n\t\t\tClass.forName("com.mysql.jdbc.Driver");\n\t\t&#125; catch (ClassNotFoundException e) &#123;\n\t\t\tthrow new IllegalStateException(e);\n\t\t&#125;\n\t&#125;\n\t\n\tpublic static void runConnection(String dbName, \n\t\t\tConnectionRunner runner) throws SQLException &#123;\n\t\tConnection conn = null;\n\t\ttry &#123;\n\t\t\tconn = DriverManager.getConnection(getDBUrl(dbName), "root", "root");\n\t\t\trunner.run(conn);\n\t\t&#125; finally &#123;\n\t\t\tif (conn != null && !conn.isClosed())\n\t\t\t\tconn.close();\n\t\t&#125;\n\t&#125;\n\t\n\tpublic interface ConnectionRunner &#123;\n\t\tpublic void run(Connection conn) throws SQLException;\n\t&#125;\n\t\n\tprivate static String getDBUrl(String dbName) &#123;\n\t\treturn "jdbc:mysql://localhost:3306" + "/" + dbName;\n\t&#125;\n&#125;\n</pre></div><br/><hr /></p><p>get_data.java:<div style="class=code" class="code"><pre>package grid;\n\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.zkoss.zul.ListModel;\nimport org.zkoss.zul.SimpleListModel;\n\nimport grid.data_connection;\nimport grid.data_connection.ConnectionRunner;\nimport gridex.EjemploRenderer;\n\npublic class get_data &#123;\n\t\n\tprivate static final String DB_NAME = "db_name";\n\t\n\tprivate static final String TABLE_NAME = "table_name";\n\n    private static final String[] COLUMNS = new String[]&#123;\n     "Subject",\n    "Received",\n    "Size"\n    &#125;;\n    \n    private static final List&lt;String&gt; COLUMN_LBS = Arrays.asList(new String[]&#123;\n    "Subject",\n    "Received",\n    "Size"\n            &#125;);\n\t\n\tpublic List&lt;List&lt;Object&gt;&gt; getData(String dbName, final String tableName, final String[] columns) throws SQLException &#123;\n\n\t\tfinal boolean selectStar = columns == null || columns.length == 0;\n\t\tfinal List&lt;List&lt;Object&gt;&gt; list = new ArrayList&lt;List&lt;Object&gt;&gt;();\n\n\t\tdata_connection.runConnection( dbName, new ConnectionRunner() &#123;\n\t\t\tpublic void run(Connection conn) throws SQLException &#123;\n\t\t\t\tStatement stmt = conn.createStatement();\n\t\t\t\tString query = "SELECT &#42; FROM " + tableName;\n\t\t\t\t\n                    query += " LIMIT 1000"; // Limitierung der Daten auf die ersten 1.000 Zeilen\n                    \n\t\t\t\tResultSet res = stmt.executeQuery(query);\n\t\t\t\twhile (res.next()) &#123;\n\t\t\t\t\tList&lt;Object&gt; row = new ArrayList&lt;Object&gt;();\n\t\t\t\t\tfor (String col : columns)\n\t\t\t\t\t\trow.add(res.getObject(col));\n\t\t\t\t\tlist.add(row);\n\t\t\t\t&#125;\n\t\t\t\tres.close();\n\t\t\t&#125;\n\t\t&#125;);\n\n\t\treturn list;\t\t\n\t\t\n\t\t\n\t&#125;\n\n&#125;\n</pre></div><br/><hr /></p><p>MyRenderer.java:<div style="class=code" class="code"><pre>package grid;\n\nimport org.zkoss.zul.Div;\nimport org.zkoss.zul.Image;\nimport org.zkoss.zul.Label;\nimport org.zkoss.zul.Row;\nimport org.zkoss.zul.RowRenderer;\n\npublic \tclass MyRenderer implements RowRenderer&#123;\n\tpublic void render(Row row, java.lang.Object data) &#123;\n\t\tif(data instanceof String[]) &#123;\n\t\t\tString[] ary = (String[]) data;\n            Div div = new Div();\n            Image icon = new Image();\n            icon.setStyle("padding: 0px 10px");\n            icon.setSrc("info.png");\n            div.appendChild(icon);\n            new Label(ary[0]).setParent(div);\n            row.appendChild(div);\n            new Label(ary[1]).setParent(row);\n            new Label(ary[2]).setParent(row);\n            new Label(ary[3]).setParent(row);\n\t\t&#125;\n\t&#125;\n\n\t@Override\n\tpublic void render(Row row, Object data, int index) throws Exception &#123;\n\t\t\n\t&#125;\n\nMyRenderer renderer = new MyRenderer();\nListModel model = new ListModelList(grid.get_data.list);\n\n&#125;\n</pre></div></p>'},[]],
['zul.wgt.Separator','d7DWj0',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','d7DWk0',{id:'signatureDiv',visible:false,sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','d7DWl0',{id:'signature',visible:false,sclass:'signature',prolog:'\n\t\t\t'},[]]]]]]]],
['zul.grid.Row','d7DWp',{_loaded:true,_index:1},[
['zul.wnd.Window','d7DWm0',{$onClose:true,width:'140px',sclass:'commentAuthorContent',prolog:'\n\n'},[
['zul.box.Box','d7DWn0',{prolog:'\n\t'},[
['zul.box.Vlayout','d7DWo0',{},[
['zul.box.Hlayout','d7DWp0',{},[
['zul.wgt.Toolbarbutton','d7DWq0',{id:'authorBtn',$onClick:true,sclass:'author-popup-btn',label:'benbai'},[]]]],
['zul.wgt.Label','d7DWs0',{id:'roleDescription',style:'color: #EA4317;'},[]]]],
['zul.wgt.Div','d7DWu0',{},[]],
['zul.wgt.Div','d7DWx0',{},[
['zul.wgt.Label','d7DWy0',{id:'post',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Posts:'},[]],
['zul.wgt.Label','d7DWz0',{id:'postValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'416'},[]]]],
['zul.wgt.Div','d7DW_1',{},[
['zul.wgt.Label','d7DW01',{id:'joined',sclass:'authorTitle',prolog:'\n\t\t\t',value:'Joined:'},[]],
['zul.wgt.Label','d7DW11',{id:'joinedValue',sclass:'authorValue',style:'font-size: 10px;',prolog:'\n\t\t\t',value:'Apr 13, 2011'},[]]]],
['zul.wgt.Div','d7DW21',{},[]],
['zul.wgt.Div','d7DW41',{},[
['zul.wgt.Toolbarbutton','d7DW51',{id:'myWebsite',tooltiptext:'Personal Website',prolog:'\n\t\t\t',tooltip:'http://www.zkoss.org',image:'/forum/images/Globe18x18.png;jsessionid=95BBF42E514267F7EA99DEB71496D97E',href:'http://www.zkoss.org',target:'_blank'},[]]]]],'vertical']]],
['zul.wnd.Window','d7DW61',{$onClose:true,sclass:'commentContent',prolog:'\n\t'},[
['zul.wgt.Div','d7DW71',{id:'mainVbox',width:'100%',prolog:'\n\t\t'},[
['zul.box.Vlayout','d7DW81',{sclass:'comment-meta',prolog:'\n\t\t\t'},[
['zul.wgt.Label','d7DW91',{id:'dateCreated',sclass:'comment-date',value:'4 hrs ago'},[]],
['zul.wgt.Div','d7DWa1',{sclass:'comment-ctrl'},[]]]],
['zul.wgt.Html','d7DWd1',{id:'body',sclass:'commentBody',prolog:'\n\t\t\t',content:'<p  style="margin:2px 2px;">Hi tuconsulting,</p><p>You need a composer to handle it, for example, </p><p>zul file:<div style="class=code" class="code"><pre>\n&lt;zk&gt;\n\t&lt;div id="outer" apply="test.TestComposer"&gt;\n\t\t&lt;grid fixedLayout="true" model="$&#123;outer$composer.model&#125;"\n\t\t\trowRenderer="$&#123;outer$composer.renderer&#125;"\n\t\t\tautopaging="true" mold="paging" vflex="true"&gt;\n\t\t \t&lt;columns sizable="true" menupopup="auto"&gt;\n\t\t       &lt;column width="80px" label="Info" sort="auto"/&gt;\n\t\t       &lt;column width="200" label="Subject" sort="auto"/&gt;\n\t\t       &lt;column width="150px" label="Received" sort="auto"/&gt;\n\t\t       &lt;column width="50px" label="Size" sort="auto"/&gt;\n\t\t     &lt;/columns&gt;\n\t\t&lt;/grid&gt;\n\t&lt;/div&gt;\n&lt;/zk&gt;\n</pre></div></p><p>The composer<div style="class=code" class="code"><pre>\npackage test;\n\nimport java.util.&#42;;\n\nimport org.zkoss.zk.ui.util.GenericForwardComposer;\nimport org.zkoss.zul.&#42;;\n\npublic class TestComposer extends GenericForwardComposer &#123;\n\t\n\tprivate ListModel _model;\n\tprivate MyRenderer _renderer = new MyRenderer();\n\tpublic ListModel getModel () &#123;\n\t\tif (_model == null) &#123;\n\t\t\t_model = new ListModelList(getData());\n\t\t&#125;\n\t\treturn _model;\n\t&#125;\n\tpublic RowRenderer getRenderer () &#123;\n\t\treturn _renderer;\n\t&#125;\n\t// return data list\n\tprivate List getData() &#123;\n\t\tList l = new ArrayList();\n\t\tfor (int i = 0; i &lt; 10; i++) &#123;\n\t\t\tString[] s = &#123;"data " + i + " 0",\n\t\t\t\t\t"data " + i + " 1",\n\t\t\t\t\t"data " + i + " 2",\n\t\t\t\t\t"data " + i + " 3"\n\t\t\t&#125;;\n\t\t\tl.add(s);\n\t\t&#125;\n\t\treturn l;\n\t&#125;\n\tclass MyRenderer implements RowRenderer&#123;\n\t\tpublic void render(Row row, java.lang.Object data) &#123;\n\t\t\tif(data instanceof String[]) &#123;\n\t\t\t\tString[] ary = (String[]) data;\n\t            Div div = new Div();\n\t            Image icon = new Image();\n\t            icon.setStyle("padding: 0px 10px");\n\t            icon.setSrc("info.png");\n\t            div.appendChild(icon);\n\t            new Label(ary[0]).setParent(div);\n\t            row.appendChild(div);\n\t            new Label(ary[1]).setParent(row);\n\t            new Label(ary[2]).setParent(row);\n\t            new Label(ary[3]).setParent(row);\n\t\t\t&#125;\n\t\t&#125;\n\n\t\tpublic void render(Row row, Object data, int index) throws Exception &#123;\n\t\t\trender(row, data); // don\'t care index\n\t\t&#125;\n\t&#125;\n&#125;\n\n</pre></div></p><p>Regards,<br/>Ben</p>'},[]],
['zul.wgt.Separator','d7DWe1',{prolog:'\n\t\t\t',orient:'horizontal'},[]],
['zul.wgt.Div','d7DWf1',{id:'signatureDiv',sclass:'news-line',prolog:'\n\t\t\t'},[]],
['zul.wgt.Label','d7DWg1',{id:'signature',sclass:'signature',prolog:'\n\t\t\t',value:'[a href="http://www.zkoss.org"]ZK[/a]'},[]]]]]]]]]]]],
['zul.wgt.Popup','d7DWb',{id:'authorPopup',visible:false,$$onOpen:false,sclass:'user-popup'},[]],
['zul.wgt.Label','d7DWc',{id:'anchor',visible:false},[]]]]);
</script>
<div id="d7DWf" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Label','d7DWf',{},[]]);
</script>
<div class="c-middlebar">
				<table border="0" width="100%">
					<tr>
						<td align="left" style="width: 1%">
							<div class="c-newthread" align="right"><div id="d7DWg" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Button','d7DWg',{sclass:'forumButton',label:'Reply',href:'/forum/login.zul;jsessionid=95BBF42E514267F7EA99DEB71496D97E?path=http://www.zkoss.org/forum/listComment/20135-Problem-displaying-data-from-MySQL-Table-in-Grid'},[]]);
</script>
</div>
						</td>
						<td align="right" style="width: 99%">
					        <div class="c-pages">
					            
					        </div>
						</td>		
					</tr>
				</table>
			</div>
			
			<br /><div id="d7DWh" class="z-temp"></div><script type="text/javascript">zkx(
['zul.wgt.Div','d7DWh',{id:'comment-reply'},[
['zk.Native','d7DWk',{prolog:'<a name="reply"></a>'},[]],
['zk.Macro','d7DWi',{},[]],
['zul.wgt.Label','d7DWj',{},[]]]]);
</script>

		<div id="content-bottom"></div>
	</div>	
	</div>
</div>
	
<script type="text/javascript" 	src="/forum/js/commentCodeHandle.js;jsessionid=95BBF42E514267F7EA99DEB71496D97E" ></script>



</div> </div>
<!-- Google  -->
<script type="text/javascript">
 var z_n = "null",
	z_i = "220.135.202.140" ;
 var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
 document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript" src="http://www.zkoss.org/resource/js/page/gaz.js"></script>
<script type="text/javascript" src="/forum/js/template.js;jsessionid=95BBF42E514267F7EA99DEB71496D97E"></script>
<!-- Google  -->
<div id="footer-2">
	<div id="footer-2-inner">
		<img src="http://sourceforge.net/sflogo.php?group_id=152762&amp;type=1" width="0" height="0" alt="SourceForge" style="float:right;">
		
		<div id="footer-txt">
		<div class="contacts"><a href="http://www.zkoss.org/support/about/contact" title="Contact Us">Contact Us</a></div>
		&#169; 2012 Potix Corporation. All rights reserved.<br />
		ZK is a trademark of Potix Corporation.</div>
		<div id="partners">
			<div class="txt">Partners :</div>
			<div class="allpartners"><a href="/partner/" title="ZK Partners">Partners</a></div>
		</div>
	</div>
</div>
</div>
</body>
</html>
</body>
</html>
